# Інсталяція через докер контейнери

## 1. Що таке докер контейнер

![Мережа][trembita-docker-install-0]

**Docker** — інструментарій для управління ізольованими Linux-контейнерами. Docker доповнює інструментарій LXC більш високорівневим API, що дозволяє керувати контейнерами на рівні ізоляції окремих процесів. Зокрема, Docker дозволяє не переймаючись вмістом контейнера запускати довільні процеси в режимі ізоляції і потім переносити і клонувати сформовані для даних процесів контейнери на інші сервери, беручи на себе всю роботу зі створення, обслуговування і підтримки контейнерів.

### Основні можливості Docker

- Можливість розміщення в ізольованому оточенні різнорідної начинки, що включає різні комбінації виконуваних файлів, бібліотек, файлів конфігурації, скриптів, файлів jar, gem, tar тощо
- Підтримка роботи на будь-якому комп'ютері на базі архітектури x86_64 з системою на базі ядра Linux, починаючи від ноутбуків, закінчуючи серверами та віртуальними машинами. Можливість роботи поверх немодифікованих сучасних ядер Linux (без накладення патчів) і в штатних оточеннях всіх великих дистрибутивів Linux, включаючи Fedora, RHEL, Ubuntu, Debian, SUSE, Gentoo і Arch
- Використання легковагих контейнерів для ізоляції процесів від інших процесів і основної системи.
- Оскільки контейнери використовують свою власну самодостатню файлову систему, не важливо де, коли і в якому оточенні вони запускаються.
- Ізоляція на рівні файлової системи: кожен процес виконується у повністю окремій кореневій ФС;
- Ізоляція ресурсів: споживання системних ресурсів, таких як витрата пам'яті і навантаження на CPU, можуть обмежуватися окремо для кожного контейнера з використанням cgroups;
- Ізоляція на рівні мережі: кожен ізольований процес має доступ тільки до пов'язаного з контейнером мережевого простору імен, включаючи віртуальний мережевий інтерфейс і прив'язані до нього IP-адреси;
- Коренева файлова система для контейнерів створюється з використанням механізму copy-on-write[en] (окремо зберігаються тільки змінені і нові дані), що дозволяє прискорити розгортання, знижує витрату пам'яті і економить дисковий простір;
- Всі стандартні потоки (stdout/stderr) кожного виконуваного в контейнері процесу накопичуються і зберігаються у вигляді логу;
- Можливість створення контейнерів, що містять складні програмні стеки, через зв'язування між собою вже існуючих контейнерів, що містять складові частини формованого стека. Зв'язування здійснюється не через злиття вмісту, а через забезпечення взаємодії між контейнерами (створюється мережевий тунель).

## 2. Які переваги контейнеру для системи Трембіта

<dl>
    <dt>Мобільність</dt>
    <dd>Контейнер можна переносити на інший сервер, деактивувати чи розгортати за одною командою. При цьому усі дані та стан буде надійно збережено
    </dd>

    <dt>Бекапіювання</dt>
    <dd>На основі мобільності, за лічені секунди, ви можете зберігати контейнер та стартувати з будь-яких версій
    </dd>

    <dt>Все з коробки</dt>
    <dd>Контейнери можна комбінувати поєднуючи з робочими контейнерами моніторингу, логування і т.д.
    </dd>
</dl>

## 3. Процесс встановлення

Процесс встановлення та розгортання середовища мінімізовані за допомогою скрипта для встановлення.

Архів містить:

- Образ контейнеру який буде розгорнуто на вашому сервері(докер контейнер)
- Скрипти з адміністрування контейнерів (Наприклад експорту/імпорту, коректній зупинці сервісів, перевірка мережі і т.д.)
- Bash-шорткати для швидкого виконання команди
- Docker-compose файли для коректного старту чи зупинці контейнера
- Сервіс-файли, для запуску контейнеру как системний сервіс

### Попередні налаштування

Скрипти написані через Ansible. Для початку встановлення, необхідно встановити Ansible останньої версії за наступними командами:

```bash
sudo apt install -y software-properties-common
sudo apt-add-repository --yes --update ppa:ansible/ansible
sudo apt install -y ansible
```

Далі завантажуємо архів за посиланням:

[trembita-docker-install-0]: /assets/images/Docker_and_Trembita.png  "Logo Title Text 2"